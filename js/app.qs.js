(function(){var e={4129:function(e){const t=512;async function n(e){let t=document.createElement("video");if(t.setAttribute("autoplay",""),t.setAttribute("muted",""),t.setAttribute("playsinline",""),t.setAttribute("ref","video"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex="-2",navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:e}}).then((e=>(t.addEventListener("loadedmetadata",(()=>{t.setAttribute("width",t.videoWidth+"px"),t.setAttribute("height",t.videoHeight+"px"),r(t),window.addEventListener("resize",(()=>{r(t)}))})),t.srcObject=e,t))).catch((e=>{throw e}))}function i(e){let n=document.createElement("canvas");n.style.display="none",n.width=t,n.height=e.videoHeight/e.videoWidth*n.width,n.getContext("2d").drawImage(e,0,0,n.width,n.height);let i=n.toDataURL("image/jpeg");return i}function r(e){let t,n,i=e?.parentElement;if(!e||!i)return;const r=e.videoWidth/e.videoHeight,a=i.clientWidth/i.clientHeight;r>a?(n=i.clientHeight,t=n*r):(t=i.clientWidth,n=t/r),e.style.top=-(n-i.clientHeight)/2+"px",e.style.left=-(t-i.clientWidth)/2+"px",e.style.width=t+"px",e.style.height=n+"px"}function a(e){if(e&&null!=e){const t=e.srcObject.getTracks();t.forEach((function(e){e.stop()})),e.remove()}}e.exports={CreateCameraVideo:n,TakePhoto:i,StopVideo:a}},3861:function(e){const t="#scanningOverlay",n="#loadingOverlay",i=2,r=2,a=.001,o=1e3,s=30;function c(e,c){return new window.MINDAR.IMAGE.MindARThree({container:c,imageTargetSrc:e,uiScanning:t,uiLoading:n,warmupTolerance:i,missTolerance:r,filterMinCF:a,filterBeta:o,maxTrack:s})}function d(e){return new window.MINDAR.FACE.MindARThree({container:e,uiScanning:t,uiLoading:n})}e.exports={MindArTarget:c,MindArFace:d}},8006:function(e,t,n){"use strict";var i=n(9242),r=n(3396);const a={id:"app"};function o(e,t){const n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(n)])}var s=n(89);const c={},d=(0,s.Z)(c,[["render",o]]);var h=d,u=n(2483);const l=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-fullscreen",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"})],-1),w=[l],f={class:"fs layer1",id:"unity-canvas",ref:"uc"},m=["innerHTML"],p=["innerHTML"],S=["innerHTML"],g=["innerHTML"];function v(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)(r.HY,null,[a.fullscreenSupported?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>o.SetFullscreen(!a.isFullscreen)),ref:"fullscreenBtn",id:"fullscreenBtn"},w,512)):(0,r.kq)("",!0),(0,r._)("canvas",f,null,512),((0,r.wg)(),(0,r.j4)((0,r.LL)(o.GetSceneComponent()),{sceneData:a.currentScene,key:a.currentScene.sceneIndex},null,8,["sceneData"])),a.ShowLoading?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"fs layer2",innerHTML:a.loadingScreens["loading"]},null,8,m)):(0,r.kq)("",!0),a.ShowScanning?((0,r.wg)(),(0,r.iD)("div",{key:2,class:"fs layer2",innerHTML:a.loadingScreens["scanning"]},null,8,p)):(0,r.kq)("",!0),a.ShowSplash?((0,r.wg)(),(0,r.iD)("div",{key:3,class:"fs layer2",innerHTML:a.loadingScreens["splash"]},null,8,S)):(0,r.kq)("",!0),a.ShowOrientation?((0,r.wg)(),(0,r.iD)("div",{key:4,class:"fs layer2",innerHTML:a.loadingScreens["orientation"]?a.loadingScreens["orientation"]:a.loadingScreens["loading"]},null,8,g)):(0,r.kq)("",!0)],64)}class y{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}class A{constructor(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){this.elements=e}clone(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}decompose(e,t,n){const i=this.elements;let r=new y(i[0],i[1],i[2]).magnitude();const a=new y(i[4],i[5],i[6]).magnitude(),o=new y(i[8],i[9],i[10]).magnitude(),s=this.determinant();s<0&&(r=-r);const c=1/r,d=1/a,h=1/o,u=new A;return u.clone(this),u.elements[0]*=c,u.elements[1]*=c,u.elements[2]*=c,u.elements[4]*=d,u.elements[5]*=d,u.elements[6]*=d,u.elements[8]*=h,u.elements[9]*=h,u.elements[10]*=h,e.set(i[12],i[14],i[13]),n.set(r,a,o),t.setFromRotationMatrix(u),this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],d=e[2],h=e[6],u=e[10],l=e[14],w=e[3],f=e[7],m=e[11],p=e[15];return w*(+r*s*h-i*c*h-r*o*u+n*c*u+i*o*l-n*s*l)+f*(+t*s*l-t*c*u+r*a*u-i*a*l+i*c*d-r*s*d)+m*(+t*c*h-t*o*l-r*a*h+n*a*l+r*o*d-n*c*d)+p*(-i*o*d-t*s*h+t*o*u+i*a*h-n*a*u+n*s*d)}}class b{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],c=t[2],d=t[6],h=t[10],u=n+o+h;if(u>0){const e=.5/Math.sqrt(u+1);this.x=(d-s)*e,this.y=(a-i)*e,this.z=(r-c)*e,this.w=.25/e}else if(n>o&&n>h){const e=2*Math.sqrt(1+n-o-h);this.x=.25*e,this.y=(r+c)/e,this.z=(i+a)/e,this.w=(d-s)/e}else if(o>h){const e=2*Math.sqrt(1+o-n-h);this.x=(i+a)/e,this.y=(s+d)/e,this.z=.25*e,this.w=(r-c)/e}else{const e=2*Math.sqrt(1+h-n-o);this.x=(r+c)/e,this.y=.25*e,this.z=(s+d)/e,this.w=(a-i)/e}return this.x*=-1,this}}class E{constructor(){}isValid(){}}class x extends E{constructor(e,t,n,i=60,r=[]){super(),e||(e=new y),t||(t=new b),n||(n=new y),this.position=e,this.rotation=t,this.scale=n,this.cameraFOV=i,this.faceMeshData=r.join()}isValid(){return!!(this.position&&this.rotation&&this.scale&&this.faceMeshData)}}class M extends E{constructor(e,t,n,i=60,r=0){super(),e||(e=new y),t||(t=new b),n||(n=new y),this.position=e,this.rotation=t,this.scale=n,this.cameraFOV=i,this.targetIndex=r}isValid(){return!!(this.position&&this.rotation&&this.scale)}}let T,P,F,H,O,L,C,_;function k(e){C=e.Module,T=e.Module.cwrap("call_cb_TargetTransform",null,["number","number","number","number","number"]),P=e.Module.cwrap("call_cb_FaceTransform",null,["number","number","number","number","string","number"]),F=e.Module.cwrap("call_cb_MarkerTransform",null,["number","number","number"]),H=e.Module.cwrap("call_cb_GeolocationTransform",null,["number","number","number","number"]),O=e.Module.cwrap("call_cb_ScanningFinished",null,[]),L=e.Module.cwrap("call_cb_SceneLoaded",null,["number"])}function D(e,t,n,i,r,a,o){let s=new x(t,n,i,r,a);if(s.isValid()){if(e){var c=C._malloc(40),d=c>>2;C.HEAPF32[d]=s.position.x,C.HEAPF32[d+1]=s.position.y,C.HEAPF32[d+2]=s.position.z,C.HEAPF32[d+3]=s.rotation.x,C.HEAPF32[d+4]=s.rotation.y,C.HEAPF32[d+5]=s.rotation.z,C.HEAPF32[d+6]=s.rotation.w,C.HEAPF32[d+7]=s.scale.x,C.HEAPF32[d+8]=s.scale.y,C.HEAPF32[d+9]=s.scale.z,P(c,c+12,c+28,s.cameraFOV,s.faceMeshData,o),C._free(c)}}else console.error("Face transform is invalid!")}function I(e,t,n,i,r,a){let o=new M(t,n,i,r,a);if(o.isValid()){if(e){var s=C._malloc(40),c=s>>2;C.HEAPF32[c]=o.position.x,C.HEAPF32[c+1]=o.position.y,C.HEAPF32[c+2]=o.position.z,C.HEAPF32[c+3]=o.rotation.x,C.HEAPF32[c+4]=o.rotation.y,C.HEAPF32[c+5]=o.rotation.z,C.HEAPF32[c+6]=o.rotation.w,C.HEAPF32[c+7]=o.scale.x,C.HEAPF32[c+8]=o.scale.y,C.HEAPF32[c+9]=o.scale.z,T(s,s+12,s+28,o.cameraFOV,a),C._free(s)}}else console.error("Target transform is invalid!")}function R(e,t,n,i,r){if(e){var a=C._malloc(28),o=a>>2;C.HEAPF32[o]=t.x,C.HEAPF32[o+1]=t.y,C.HEAPF32[o+2]=t.z,C.HEAPF32[o+3]=n.x,C.HEAPF32[o+4]=n.y,C.HEAPF32[o+5]=n.z,C.HEAPF32[o+6]=n.w,F(a,a+12,i,r),C._free(a)}}function q(e,t,n,i,r){if(e){var a=C._malloc(52),o=a>>2;C.HEAPF32[o]=t.x,C.HEAPF32[o+1]=t.y,C.HEAPF32[o+2]=t.z,C.HEAPF32[o+3]=n.x,C.HEAPF32[o+4]=n.y,C.HEAPF32[o+5]=n.z,C.HEAPF32[o+6]=n.w,C.HEAPF32[o+7]=r.accuracy,C.HEAPF32[o+8]=r.altitude,C.HEAPF32[o+9]=r.heading,C.HEAPF32[o+10]=r.latitude,C.HEAPF32[o+11]=r.longitude,C.HEAPF32[o+12]=r.speed,H(a,a+12,i,a+28),C._free(a)}}function j(e){e&&O()}function z(e,t){e&&L(t)}function N(e,t){var n="./Build";const i=!1;var r,a;i?(r=n+"/Build/Build.loader.js",a={dataUrl:n+"/Build/Build.data",frameworkUrl:n+"/Build/Build.framework.js",codeUrl:n+"/Build/Build.wasm",streamingAssetsUrl:"StreamingAssets",companyName:"DefaultCompany",productName:"ar-unity-renderer-scene",productVersion:"1.0"}):(r=n+"/test.loader.js",a={dataUrl:n+"/test.data",frameworkUrl:n+"/test.framework.js",codeUrl:n+"/test.wasm",streamingAssetsUrl:"StreamingAssets",companyName:"DefaultCompany",productName:"ar-unity-renderer-scene",productVersion:"1.0"}),e.width=window.innerWidth,e.height=window.innerHeight;var o=document.createElement("script");o.src=r,o.onload=()=>{createUnityInstance(e,a).then((e=>{window.ShowSplashScreen(!1),_=e,k(e),t(e)})).catch((e=>{}))},e.appendChild(o)}function U(e,t){const n=new A(e),i=new y,r=new b,a=new y;return n.decompose(i,r,a),{position:i,rotation:r,scale:a}}function V(e,t,n,i){const r=U(e),a=r.position,o=r.rotation,s=r.scale;D(_,a,o,s,t,n,i)}function W(e,t,n){const i=U(e),r=i.position,a=i.rotation,o=i.scale;I(_,r,a,o,t,n)}function $(e,t,n){const i=U(e),r=i.position,a=i.rotation;R(_,r,a,t,n)}function B(e,t,n){const i=U(e),r=i.position,a=i.rotation;q(_,r,a,t,n)}function G(){j(_)}function Z(e){z(_,e)}class Y{constructor(e){this.vue=e,window.SCENE_LOADER=this}async LoadScene(e,t,n){let i={sceneType:e,sceneIndex:Number(t),amountOfTargets:Number(n)};this.vue.currentScene=i}async ScanSurface(e){void 0!=window.currentScene&&null!=window.currentScene&&window.currentScene.ScanSurface&&window.currentScene.ScanSurface()}}const K={class:"fs layer0 debug",ref:"mc"};function X(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)("div",K,null,512)}var J=n(3861),Q={name:"FaceScene",props:{sceneData:Object},data(){return{}},mounted(){this.Entry(0)},methods:{async Entry(e){1==e?window.ShowOrientationScreen(!0):window.ShowLoadingIndicator(!0),await window.SetCurrentScene(this),this.Launch(e)},async Launch(e){await this.Setup(),await this.Start(),1==e?window.ShowOrientationScreen(!1):window.ShowLoadingIndicator(!1)},async Setup(){return await n.e(816).then(n.t.bind(n,9816,23)).then((async()=>{let e=(0,J.MindArFace)(this.$refs.mc);this.mindAr=e;let t=e.addFaceMesh();e.addAnchor(0);let n=e.renderer,i=e.scene,r=e.camera;this.Start=async()=>{await e.start(),Z(this.sceneData.sceneIndex),n.setAnimationLoop((()=>{n.render(i,r),this.CheckTarget(e,t.geometry.positions)}))},this.Stop=async()=>{await e.stop(),n.setAnimationLoop(null)}}))},CheckTarget(e,t){let n=e.container.offsetWidth/e.container.offsetHeight,i=n<4/3?e.camera.fov:e.camera.fov*(4/3)/n,r=e.anchors[0],a=0;r.group.visible&&(a=1);let o=r.group.matrix.elements;V(o,i,t,a)}}};const ee=(0,s.Z)(Q,[["render",X],["__scopeId","data-v-08add0fc"]]);var te=ee;const ne={class:"fs layer0",ref:"mc"};function ie(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)("div",ne,null,512)}var re={name:"TargetScene",props:{sceneData:Object},data(){return{}},mounted(){this.Entry()},methods:{async Entry(e){1==e?window.ShowOrientationScreen(!0):window.ShowLoadingIndicator(!0),await window.SetCurrentScene(this),this.Launch(e)},async Launch(e){await this.Setup(),await this.Start(),1==e?window.ShowOrientationScreen(!1):window.ShowLoadingIndicator(!1)},async Setup(){return await n.e(528).then(n.t.bind(n,5528,23)).then((async()=>{let e=(0,J.MindArTarget)(`./Targets/targets_${this.sceneData.sceneIndex}.mind`,this.$refs.mc);this.mindAr=e;for(var t=0;t<this.sceneData.amountOfTargets;t++)e.addAnchor(t);let n=e.renderer;e.scene,e.camera;this.Start=async()=>{await e.start(),Z(this.sceneData.sceneIndex);for(var t=0;t<this.sceneData.amountOfTarget;t++)e.anchors[t].group.visible=!1;n.setAnimationLoop((()=>{this.CheckTarget(e)}))},this.Stop=async()=>{await e.stop(),n.setAnimationLoop(null)}}))},CheckTarget(e){let t=e.container.offsetWidth/e.container.offsetHeight,n=t<4/3?e.camera.fov:e.camera.fov*(4/3)/t;for(var i=0;i<this.sceneData.amountOfTargets;i++){let t=e.anchors[i];if(t.group.visible)return W(t.group.matrix.elements,n,i)}return W(e.camera.matrix.elements,n,-1)}}};const ae=(0,s.Z)(re,[["render",ie],["__scopeId","data-v-7719cfdc"]]);var oe=ae;const se={class:"fs",ref:"mc"},ce={key:0,id:"startScreen"};function de(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",se,null,512),a.isUserActionRequired?((0,r.wg)(),(0,r.iD)("div",ce,[(0,r._)("button",{onClick:t[0]||(t[0]=e=>o.Entry())},"START AR")])):(0,r.kq)("",!0)],64)}var he=n(1114),ue={name:"MarkerScene",props:{sceneData:Object},data(){return{isUserActionRequired:!1,hitTestSourceRequested:!1,hitTestSource:null,hitMatrix:new he.yGw}},mounted(){this.Entry()},methods:{async Entry(e){1==e?window.ShowOrientationScreen(!0):window.ShowLoadingIndicator(!0),await window.SetCurrentScene(this),this.Launch(e)},async Launch(e){await this.Setup(),await this.Start(),1==e?window.ShowOrientationScreen(!1):window.ShowLoadingIndicator(!1)},async Setup(){this.scene=new he.xsS,this.camera=new he.cPb(70,window.innerWidth/window.innerHeight,.01,20),this.renderer=new he.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.xr.enabled=!0,this.$refs.mc.appendChild(this.renderer.domElement),this.controller=this.renderer.xr.getController(0),this.scene.add(this.controller),this.Start=async()=>{navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],requiredFeatures:["hit-test"],domOverlay:{root:this.sceneData.unity}}).then((async e=>{this.isUserActionRequired=!1,this.session=e,this.renderer.xr.setReferenceSpaceType("local"),await this.renderer.xr.setSession(e),Z(this.sceneData.sceneIndex),this.animate()})).catch((()=>{this.isUserActionRequired=!0}))},this.Stop=async()=>{this.session&&await this.session.end()}},animate(){this.renderer.setAnimationLoop(((e,t)=>{this.Render(e,t),this.SendCameraTransformTounity()}))},Render(e,t){if(t){const e=this.renderer.xr.getReferenceSpace(),n=this.renderer.xr.getSession();if(!1===this.hitTestSourceRequested){let e=this;n.requestReferenceSpace("viewer").then((function(t){n.requestHitTestSource({space:t}).then((function(t){e.hitTestSource=t}))})),n.addEventListener("end",(function(){this.hitTestSourceRequested=!1,this.hitTestSource=null})),this.hitTestSourceRequested=!0}if(this.hitTestSource){const n=t.getHitTestResults(this.hitTestSource);if(n.length){const t=n[0];this.hitMatrix=(new he.yGw).fromArray(t.getPose(e).transform.matrix)}else this.hitMatrix=new he.yGw}}this.renderer.render(this.scene,this.camera)},SendCameraTransformTounity(){let e=this.camera.matrixWorld.elements,t=this.camera.fov,n=(new he.Pa4).setFromMatrixPosition(this.hitMatrix),i=(new he.Pa4).setFromMatrixPosition(this.camera.matrixWorld);const r=new he.Pa4;r.subVectors(n,i),$(e,r.length(),t)}}};const le=(0,s.Z)(ue,[["render",de],["__scopeId","data-v-204d2403"]]);var we=le;const fe={class:"fs layer0",ref:"mc"},me={key:0,id:"startScreen"};function pe(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",fe,null,512),a.isUserActionRequired?((0,r.wg)(),(0,r.iD)("div",me,[(0,r._)("button",{onClick:t[0]||(t[0]=e=>o.Entry())},"START AR")])):(0,r.kq)("",!0)],64)}class Se{constructor(e=-1,t=-1,n=-1,i=-1,r=-1,a=-1){this.accuracy=e,this.altitude=t,this.heading=n,this.latitude=i,this.longitude=r,this.speed=a}set(e,t,n,i,r,a){return this.accuracy=e,this.altitude=t,this.heading=n,this.latitude=i,this.longitude=r,this.speed=a,this}}var ge={name:"GeolocationScene",props:{sceneData:Object},data(){return{isUserActionRequired:!1}},mounted(){this.Entry()},methods:{async Entry(e){1==e?window.ShowOrientationScreen(!0):window.ShowLoadingIndicator(!0),await window.SetCurrentScene(this),this.Launch(e)},async Launch(e){await this.Setup(),await this.Start(),1==e?window.ShowOrientationScreen(!1):window.ShowLoadingIndicator(!1)},async Setup(){this.scene=new he.xsS,this.camera=new he.cPb(70,window.innerWidth/window.innerHeight,.01,20),this.renderer=new he.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.xr.enabled=!0,this.$refs.mc.appendChild(this.renderer.domElement),this.controller=this.renderer.xr.getController(0),this.scene.add(this.controller),this.Start=async()=>{navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:this.sceneData.unity}}).then((async e=>{this.isUserActionRequired=!1,this.session=e,this.renderer.xr.setReferenceSpaceType("local"),await this.renderer.xr.setSession(e),Z(this.sceneData.sceneIndex),this.animate()})).catch((()=>{this.isUserActionRequired=!0}))},this.Stop=async()=>{this.session&&await this.session.end()}},animate(){let e={};this.AddOrientationEvents();const t={enableHighAccuracy:!0};navigator.geolocation.watchPosition((t=>{e=t.coords}),void 0,t),this.renderer.setAnimationLoop((()=>{this.renderer.render(this.scene,this.camera),this.SendCameraTransformTounity(e)})),this.updateNorth=!0},AddOrientationEvents(){if(window.DeviceOrientationEvent)switch(this.CheckDevice()){case"iOS":addEventListener("deviceorientation",this.OrientationHandler,!0);break;case"Android":addEventListener("deviceorientationabsolute",this.OrientationHandler,!0);break;default:return void alert("Device orientation is not supported")}else alert("Device orientation is not supported")},CheckDevice(){var e=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"},OrientationHandler(e){this.updateNorth&&(e.webkitCompassHeading?this.northHeading=this.compassHeading(e.webkitCompassHeading,e.beta,e.gamma):this.northHeading=this.compassHeading(e.alpha,e.beta,e.gamma))},SendCameraTransformTounity(e){let t=this.camera.matrixWorld.elements,n=this.camera.fov,i=new Se;e&&(i=new Se(e.accuracy,e.altitude,this.northHeading,e.latitude,e.longitude,e.speed)),B(t,n,i)},compassHeading(e,t,n){const i=e*(Math.PI/180),r=t*(Math.PI/180),a=n*(Math.PI/180),o=Math.cos(i),s=Math.sin(i),c=(Math.cos(r),Math.sin(r)),d=Math.cos(a),h=Math.sin(a),u=-o*h-s*c*d,l=-s*h+o*c*d;let w=Math.atan(u/l);return l<0?w+=Math.PI:u<0&&(w+=2*Math.PI),w*=180/Math.PI,w}}};const ve=(0,s.Z)(ge,[["render",pe],["__scopeId","data-v-4b71a9cc"]]);var ye=ve;const Ae={class:"fs layer0",ref:"mc"};function be(e,t,n,i,a,o){return(0,r.wg)(),(0,r.iD)("div",Ae,null,512)}var Ee=n(4129);n(7658),n(4200);const xe=new window.MINDAR.IMAGE.Compiler;async function Me(e){const t=[];for(let r=0;r<e.length;r++){let n=await Te(e[r]);t.push(n)}await xe.compileImageTargets(t,(e=>{console.log(e)}));const n=await xe.exportData();let i=Pe(n);return i}async function Te(e){return new Promise(((t,n)=>{let i=new Image;i.onload=()=>t(i),i.onerror=n,i.src=e}))}function Pe(e){var t=new Blob([e]),n=window.document.createElement("a");return n.download="targets.mind",n.href=window.URL.createObjectURL(t),n.href}var Fe={name:"SurfaceScene",props:{sceneData:Object},data(){return{}},mounted(){this.Entry()},methods:{async Entry(){window.ShowLoadingIndicator(!0),await window.SetCurrentScene(this),this.Launch()},async Launch(){await this.StartVideo(),window.ShowLoadingIndicator(!1),Z(this.sceneData.sceneIndex)},async ScanSurface(){window.ShowScanningIndicator(!0);let e=(0,Ee.TakePhoto)(this.video),t=await Me([e]);await this.Setup(t),await this.Start(),window.ShowScanningIndicator(!1),G()},async StartVideo(){this.video=await(0,Ee.CreateCameraVideo)("environment"),this.$refs.mc.appendChild(this.video)},async Setup(e){this.amountOfTargets;return await n.e(528).then(n.t.bind(n,5528,23)).then((async()=>{let t=(0,J.MindArTarget)(e,this.$refs.mc);this.mindAr=t;for(var n=0;n<this.sceneData.amountOfTargets;n++)t.addAnchor(n);let i=t.renderer;t.scene,t.camera;this.Start=async()=>{await t.start(),Z(this.sceneData.sceneIndex);for(var e=0;e<this.sceneData.amountOfTarget;e++)t.anchors[e].group.visible=!1;i.setAnimationLoop((()=>{this.CheckTarget(t)}))},this.Stop=async()=>{await t.stop(),(0,Ee.StopVideo)(this.video),i.setAnimationLoop(null)}}))},CheckTarget(e){let t=e.container.offsetWidth/e.container.offsetHeight,n=t<4/3?e.camera.fov:e.camera.fov*(4/3)/t;for(var i=0;i<this.sceneData.amountOfTargets;i++){let t=e.anchors[i];if(t.group.visible)return W(t.group.matrix.elements,n,i)}return W(e.camera.matrix.elements,n,-1)}}};const He=(0,s.Z)(Fe,[["render",be],["__scopeId","data-v-386ad907"]]);var Oe=He,Le={name:"App",components:{FaceScene:te,TargetScene:oe,MarkerScene:we,SurfaceScene:Oe},data(){return{fullscreenSupported:!0,isFullscreen:!1,sceneLoader:null,ShowLoading:!1,ShowScanning:!1,ShowSplash:!0,ShowOrientation:!1,loadingScreens:{},currentScene:{}}},mounted(){this.CheckFullscreenSupport(),this.LoadHTMLs(),this.Initialization(),window.StopCurrentScene=this.StopCurrentScene,window.SetCurrentScene=this.SetCurrentScene,window.timeout=this.timeout,window.ShowLoadingIndicator=this.ShowLoadingIndicator,window.ShowScanningIndicator=this.ShowScanningIndicator,window.ShowSplashScreen=this.ShowSplashScreen,window.ShowOrientationScreen=this.ShowOrientationScreen},methods:{CheckFullscreenSupport(){/iPhone/i.test(navigator.userAgent)&&(this.fullscreenSupported=!1)},async timeout(e){return new Promise((t=>setTimeout(t,e)))},async SetCurrentScene(e){this.StopCurrentScene(),window.currentScene=e},async StopCurrentScene(){window.currentScene&&null!=window.currentScene&&window.currentScene.Stop&&await window.currentScene.Stop()},GetSceneComponent(){switch(this.currentScene.unity=this.$refs.uc,this.currentScene.sceneType){case"face":return te;case"image":return oe;case"marker":return we;case"geolocation":return ye;case"surface":return Oe;default:return this.StopCurrentScene(),null}},LoadHTMLs(){const e=["loading","scanning","splash","orientation"],t=this;for(var n=0;n<e.length;n++){const r=n;var i=new XMLHttpRequest;i.open("GET",`${e[r]}.html`,!1),i.onreadystatechange=function(){if(4===i.readyState&&(200===i.status||0==i.status)){var n=i.responseText;t.loadingScreens[e[r]]=n}},i.send(null)}console.warn(this.loadingScreens)},async ReloadScene(){window.currentScene&&null!=window.currentScene&&window.currentScene.Entry&&window.currentScene.Entry(1)},async Initialization(){let e=this.$refs.uc;this.$refs.arContainer;this.sceneLoader=new Y(this);let t=this;window.addEventListener("orientationchange",(function(){t.ReloadScene()}),!1),N(e,(()=>{this.ShowLoadingIndicator(!1)}))},SetFullscreen(e){if(e){const e=()=>{this.isFullscreen=!0,window.matchMedia("(orientation: portrait)").matches&&screen.orientation.lock("portrait-primary"),window.matchMedia("(orientation: landscape)").matches&&screen.orientation.lock("landscape-primary")};this.$refs.app.requestFullscreen&&this.$refs.app.requestFullscreen().then(e).catch((e=>{console.error(e)})),this.$refs.app.webkitRequestFullScreen&&this.$refs.app.webkitRequestFullScreen().then(e).catch((e=>{console.error(e)})),this.$refs.app.mozRequestFullScreen&&this.$refs.app.mozRequestFullScreen().then(e).catch((e=>{console.error(e)}))}else document.exitFullscreen().then((()=>{this.isFullscreen=!1})).catch((e=>{console.error(e)}))},ShowLoadingIndicator(e){this.ShowLoading=e},ShowScanningIndicator(e){this.ShowScanning=e},ShowSplashScreen(e){this.ShowSplash=e},ShowOrientationScreen(e){this.ShowOrientation=e}}};const Ce=(0,s.Z)(Le,[["render",v]]);var _e=Ce;const ke=u.p7({history:u.r5(),routes:[{path:"/:id?",component:_e}]});(0,i.ri)(h).use(ke).mount("#app")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,r,a){if(!i){var o=1/0;for(h=0;h<e.length;h++){i=e[h][0],r=e[h][1],a=e[h][2];for(var s=!0,c=0;c<i.length;c++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(s=!1,a<o&&(o=a));if(s){e.splice(h--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[i,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return i[e]}}));return o["default"]=function(){return i},n.d(a,o),a}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+".qs.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ar-unity-renderer:";n.l=function(i,r,a,o){if(e[i])e[i].push(r);else{var s,c;if(void 0!==a)for(var d=document.getElementsByTagName("script"),h=0;h<d.length;h++){var u=d[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+a){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=i),e[i]=[r];var l=function(t,n){s.onerror=s.onload=null,clearTimeout(w);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},w=setTimeout(l.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=l.bind(null,s.onerror),s.onload=l.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var e={143:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var o=n.p+n.u(t),s=new Error,c=function(i){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,r[1](s)}};n.l(o,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,a,o=i[0],s=i[1],c=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var h=c(n)}for(t&&t(i);d<o.length;d++)a=o[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(h)},i=self["webpackChunkar_unity_renderer"]=self["webpackChunkar_unity_renderer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(8006)}));i=n.O(i)})();
//# sourceMappingURL=app.qs.js.map
